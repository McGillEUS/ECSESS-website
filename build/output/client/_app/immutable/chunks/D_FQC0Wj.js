import{k as Te,l as we,o as ie,c as y,a as g,f as E,t as se,s as ce}from"./CYrqHjtZ.js";import{n as F,o as ue,x as ne,q as Ce,E as Be,v as Oe,aM as Se,_ as De,G as Le,D as fe,C as me,N as Me,w as je,F as Ee,Z as Ae,i as k,g as r,ai as v,k as A,ah as x,m as K,p as H,j as N,t as ae,a as Q,aN as Ke}from"./DOp_OFmA.js";import{e as z,i as X}from"./D1lMOXtA.js";import{p as $}from"./BNvpT0_S.js";import{s as p}from"./C_bxespU.js";import{i as w}from"./B86MYzki.js";import{s as Re}from"./-4Yf0GqT.js";import"./tBvxBjpn.js";import{c as q}from"./E-qOA9zF.js";function He(t,e,n,l,c,i){let m=F;F&&ue();var a,o,s=null;F&&ne.nodeType===1&&(s=ne,ue());var d=F?ne:t,u;Ce(()=>{const f=e()||null;var h=f==="svg"?Se:null;f!==a&&(u&&(f===null?je(u,()=>{u=null,o=null}):f===o?Ee(u):(Ae(u),ie(!1))),f&&f!==o&&(u=Oe(()=>{if(s=F?s:h?document.createElementNS(h,f):document.createElement(f),Te(s,s),l){F&&we(f)&&s.append(document.createComment(""));var _=F?De(s):s.appendChild(Le());F&&(_===null?fe(!1):me(_)),l(s,_)}Me.nodes_end=s,d.before(s)})),a=f,a&&(o=a),ie(!0))},Be),m&&(fe(!0),me(d))}function de(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,l)}return n}function ve(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?de(Object(n),!0).forEach(function(l){Ne(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function Ne(t,e,n){return(e=Fe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fe(t){var e=qe(t,"string");return typeof e=="symbol"?e:e+""}function qe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var l=n.call(t,e);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ee(t){return t._type==="span"&&"text"in t&&typeof t.text=="string"&&(typeof t.marks>"u"||Array.isArray(t.marks)&&t.marks.every(e=>typeof e=="string"))}function _e(t){return typeof t._type=="string"&&t._type[0]!=="@"&&(!("markDefs"in t)||!t.markDefs||Array.isArray(t.markDefs)&&t.markDefs.every(e=>typeof e._key=="string"))&&"children"in t&&Array.isArray(t.children)&&t.children.every(e=>typeof e=="object"&&"_type"in e)}function ye(t){return _e(t)&&"listItem"in t&&typeof t.listItem=="string"&&(typeof t.level>"u"||typeof t.level=="number")}function ke(t){return t._type==="@list"}function be(t){return t._type==="@span"}function xe(t){return t._type==="@text"}const ge=["strong","em","code","underline","strike-through"];function Ue(t,e,n){if(!ee(t)||!t.marks)return[];if(!t.marks.length)return[];const l=t.marks.slice(),c={};return l.forEach(i=>{c[i]=1;for(let m=e+1;m<n.length;m++){const a=n[m];if(a&&ee(a)&&Array.isArray(a.marks)&&a.marks.indexOf(i)!==-1)c[i]++;else break}}),l.sort((i,m)=>Ve(c,i,m))}function Ve(t,e,n){const l=t[e],c=t[n];if(l!==c)return c-l;const i=ge.indexOf(e),m=ge.indexOf(n);return i!==m?i-m:e.localeCompare(n)}function he(t){var e,n;const{children:l}=t,c=(e=t.markDefs)!=null?e:[];if(!l||!l.length)return[];const i=l.map(Ue),m={_type:"@span",children:[],markType:"<unknown>"};let a=[m];for(let o=0;o<l.length;o++){const s=l[o];if(!s)continue;const d=i[o]||[];let u=1;if(a.length>1)for(u;u<a.length;u++){const h=((n=a[u])==null?void 0:n.markKey)||"",_=d.indexOf(h);if(_===-1)break;d.splice(_,1)}a=a.slice(0,u);let f=a[a.length-1];if(f){for(const h of d){const _=c==null?void 0:c.find(C=>C._key===h),b=_?_._type:h,P={_type:"@span",_key:s._key,children:[],markDef:_,markType:b,markKey:h};f.children.push(P),a.push(P),f=P}if(ee(s)){const h=s.text.split(`
`);for(let _=h.length;_-- >1;)h.splice(_,0,`
`);f.children=f.children.concat(h.map(_=>({_type:"@text",text:_})))}else f.children=f.children.concat(s)}}return m.children}function Ge(t,e){const n=[];let l;for(let c=0;c<t.length;c++){const i=t[c];if(i){if(!ye(i)){n.push(i),l=void 0;continue}if(!l){l=Y(i,c,e),n.push(l);continue}if(We(i,l)){l.children.push(i);continue}if((i.level||1)>l.level){const m=Y(i,c,e);{const a=l.children[l.children.length-1],o=ve(ve({},a),{},{children:[...a.children,m]});l.children[l.children.length-1]=o}l=m;continue}if((i.level||1)<l.level){const m=n[n.length-1],a=m&&oe(m,i);if(a){l=a,l.children.push(i);continue}l=Y(i,c,e),n.push(l);continue}if(i.listItem!==l.listItem){const m=n[n.length-1],a=m&&oe(m,{level:i.level||1});if(a&&a.listItem===i.listItem){l=a,l.children.push(i);continue}else{l=Y(i,c,e),n.push(l);continue}}console.warn("Unknown state encountered for block",i),n.push(i)}}return n}function We(t,e){return(t.level||1)===e.level&&t.listItem===e.listItem}function Y(t,e,n){return{_type:"@list",_key:`${t._key||`${e}`}-parent`,mode:n,level:t.level||1,listItem:t.listItem,children:[t]}}function oe(t,e){const n=e.level||1,l=e.listItem||"normal",c=typeof e.listItem=="string";if(ke(t)&&(t.level||1)===n&&c&&(t.listItem||"normal")===l)return t;if(!("children"in t))return;const i=t.children[t.children.length-1];return i&&!ee(i)?oe(i,e):void 0}function pe(t){let e="";return t.children.forEach(n=>{xe(n)?e+=n.text:be(n)&&(e+=pe(n))}),e}const Ze="html";function Ie(){return Math.random().toFixed(5).split(".")[1]}function ze(t){return{_key:t._key||Ie(),...t}}function Je(t){return{_key:t._key||Ie(),...t,...t._type==="block"&&Array.isArray(t.children)?{children:t.children.map(ze)}:{}}}var Qe=E("<strong><!></strong>"),Xe=E("<em><!></em>"),Ye=E("<code><!></code>"),$e=E('<span style="text-decoration:underline;"><!></span>'),et=E("<del><!></del>");function U(t,e){let n=v(()=>e.portableText.markType);var l=y(),c=k(l);{var i=a=>{var o=Qe(),s=A(o);p(s,()=>e.children??x),K(o),g(a,o)},m=(a,o)=>{{var s=u=>{var f=Xe(),h=A(f);p(h,()=>e.children??x),K(f),g(u,f)},d=(u,f)=>{{var h=b=>{var P=Ye(),C=A(P);p(C,()=>e.children??x),K(P),g(b,P)},_=(b,P)=>{{var C=T=>{var B=$e(),M=A(B);p(M,()=>e.children??x),K(B),g(T,B)},I=(T,B)=>{{var M=S=>{var D=et(),j=A(D);p(j,()=>e.children??x),K(D),g(S,D)},O=S=>{var D=y(),j=k(D);p(j,()=>e.children??x),g(S,D)};w(T,S=>{r(n)==="strike-through"?S(M):S(O,!1)},B)}};w(b,T=>{r(n)==="underline"?T(C):T(I,!1)},P)}};w(u,b=>{r(n)==="code"?b(h):b(_,!1)},f)}};w(a,u=>{r(n)==="em"?u(s):u(d,!1)},o)}};w(c,a=>{r(n)==="strong"?a(i):a(m,!1)})}g(t,l)}var tt=E("<a><!></a>");function nt(t,e){H(e,!0);let n=v(()=>{const{href:a,url:o,link:s,value:d}=e.portableText.value;return a||o||s||d});var l=y(),c=k(l);{var i=a=>{var o=tt(),s=A(o);p(s,()=>e.children??x),K(o),ae(()=>Re(o,"href",r(n))),g(a,o)},m=a=>{var o=y(),s=k(o);p(s,()=>e.children??x),g(a,o)};w(c,a=>{typeof r(n)=="string"?a(i):a(m,!1)})}g(t,l),N()}var rt=E("<p><!></p>");function R(t,e){H(e,!0);let n=v(()=>e.portableText.value.style||"normal");var l=y(),c=k(l);{var i=a=>{var o=y(),s=k(o);He(s,()=>r(n),!1,(d,u)=>{var f=y(),h=k(f);p(h,()=>e.children??x),g(u,f)}),g(a,o)},m=(a,o)=>{{var s=u=>{var f=rt(),h=A(f);p(h,()=>e.children??x),K(f),g(u,f)},d=u=>{var f=y(),h=k(f);p(h,()=>e.children??x),g(u,f)};w(a,u=>{r(n)==="normal"?u(s):u(d,!1)},o)}};w(c,a=>{["h1","h2","h3","h4","h5","h6","blockquote"].includes(r(n))?a(i):a(m,!1)})}g(t,l),N()}var lt=E("<ol><!></ol>"),at=E("<ul><!></ul>");function re(t,e){let n=v(()=>e.portableText.value),l=v(()=>r(n).listItem);var c=y(),i=k(c);{var m=o=>{var s=lt(),d=A(s);p(d,()=>e.children??x),K(s),g(o,s)},a=o=>{var s=at(),d=A(s);p(d,()=>e.children??x),K(s),g(o,s)};w(i,o=>{r(l)==="number"?o(m):o(a,!1)})}g(t,c)}var ot=E("<li><!></li>");function le(t,e){var n=ot(),l=A(n);p(l,()=>e.children??x),K(n),g(t,n)}var it=E("<br/>");function st(t){var e=it();g(t,e)}function ct(t,e){var n=y(),l=k(n);p(l,()=>e.children??x),g(t,n)}const ut={marks:{"strike-through":U,code:U,em:U,strong:U,underline:U,link:nt},block:{blockquote:R,h1:R,h2:R,h3:R,h4:R,h5:R,h6:R,normal:R},list:{bullet:re,number:re},listItem:{bullet:le,number:le},types:{},hardBreak:st,unknownBlockStyle:R,unknownList:re,unknownListItem:le,unknownMark:U,unknownType:ct};function ft(t,e={}){return{...t,...e,block:Z(t,e,"block"),list:Z(t,e,"list"),listItem:Z(t,e,"listItem"),marks:Z(t,e,"marks"),types:Z(t,e,"types")}}function Z(t,e,n){const l=e[n],c=t[n];return typeof l=="function"||l&&typeof c=="function"?l:l?{...c,...l}:c}function mt(t,e){H(e,!0);let n=v(()=>e.global.components),l=v(()=>Ke(e.node.style,"normal")),c=v(()=>typeof r(n).block=="function"?r(n).block:r(n).block[r(l)]);Q(()=>{var s,d;r(c)||(d=(s=e.global).missingComponentHandler)==null||d.call(s,r(l),"blockStyle")});let i=v(()=>({global:e.global,indexInParent:e.indexInParent,value:e.node})),m=v(()=>r(c)||r(n).unknownBlockStyle);var a=y(),o=k(a);q(o,()=>r(m),(s,d)=>{d(s,{get portableText(){return r(i)},children:(u,f)=>{var h=y(),_=k(h);p(_,()=>e.children??x),g(u,h)},$$slots:{default:!0}})}),g(t,a),N()}function dt(t,e){H(e,!0);let n=$(e,"isInline",3,!1),l=v(()=>e.global.components),c=v(()=>e.node._type),i=v(()=>r(l).types[r(c)]);Q(()=>{var d,u;r(i)||(u=(d=e.global).missingComponentHandler)==null||u.call(d,r(c),"block")});let m=v(()=>({global:e.global,value:e.node,indexInParent:e.indexInParent,parentBlock:e.parentBlock,isInline:n()})),a=v(()=>r(i)||r(l).unknownType);var o=y(),s=k(o);q(s,()=>r(a),(d,u)=>{u(d,{get portableText(){return r(m)}})}),g(t,o),N()}function vt(t,e){H(e,!0);let n=v(()=>{const{list:a}=e.global.components;return typeof a=="function"?a:a[e.node.listItem]});Q(()=>{var a,o;r(n)||(o=(a=e.global).missingComponentHandler)==null||o.call(a,e.node.listItem,"listStyle")});let l=v(()=>({global:e.global,value:e.node,indexInParent:e.indexInParent})),c=v(()=>r(n)||e.global.components.unknownList);var i=y(),m=k(i);q(m,()=>r(c),(a,o)=>{o(a,{get portableText(){return r(l)},children:(s,d)=>{var u=y(),f=k(u);p(f,()=>e.children??x),g(s,u)},$$slots:{default:!0}})}),g(t,i),N()}function gt(t,e){H(e,!0);let n=v(()=>e.global.components),l=v(()=>e.node.style??"normal"),c=v(()=>typeof r(n).listItem=="function"?r(n).listItem:r(n).listItem[r(l)]);Q(()=>{var d,u;r(c)||(u=(d=e.global).missingComponentHandler)==null||u.call(d,r(l),"listItemStyle")});let i=v(()=>r(l)!=="normal"?r(n).block[r(l)]:void 0),m=v(()=>({global:e.global,value:e.node,indexInParent:e.indexInParent})),a=v(()=>r(c)||r(n).unknownListItem);var o=y(),s=k(o);q(s,()=>r(a),(d,u)=>{u(d,{get portableText(){return r(m)},children:(f,h)=>{var _=y(),b=k(_);{var P=I=>{var T=y(),B=k(T);const M=v(()=>({...r(m),value:{...e.node,listItem:void 0}}));q(B,()=>r(i),(O,S)=>{S(O,{get portableText(){return r(M)},children:(D,j)=>{var L=y(),G=k(L);p(G,()=>e.children??x),g(D,L)},$$slots:{default:!0}})}),g(I,T)},C=I=>{var T=y(),B=k(T);p(B,()=>e.children??x),g(I,T)};w(b,I=>{r(i)?I(P):I(C,!1)})}g(f,_)},$$slots:{default:!0}})}),g(t,o),N()}function ht(t,e){H(e,!0);let n=v(()=>e.global.components.marks[e.node.markType]);Q(()=>{var a,o;r(n)||(o=(a=e.global).missingComponentHandler)==null||o.call(a,e.node.markType,"mark")});let l=v(()=>({global:e.global,parentBlock:e.parentBlock,markType:e.node.markType,value:e.node.markDef,markKey:e.node.markKey,plainTextContent:pe(e.node)})),c=v(()=>r(n)||e.global.components.unknownMark);var i=y(),m=k(i);q(m,()=>r(c),(a,o)=>{o(a,{get portableText(){return r(l)},children:(s,d)=>{var u=y(),f=k(u);p(f,()=>e.children??x),g(s,u)},$$slots:{default:!0}})}),g(t,i),N()}function _t(t,e){let n=v(()=>e.global.components),l=v(()=>e.node.text);var c=y(),i=k(c);{var m=o=>{var s=y(),d=k(s);{var u=h=>{var _=y(),b=k(_);q(b,()=>r(n).hardBreak,(P,C)=>{C(P,{})}),g(h,_)},f=h=>{var _=se();ae(()=>ce(_,r(l))),g(h,_)};w(d,h=>{typeof r(n).hardBreak=="function"?h(u):h(f,!1)})}g(o,s)},a=o=>{var s=se();ae(()=>ce(s,r(l))),g(o,s)};w(i,o=>{r(l)===`
`?o(m):o(a,!1)})}g(t,c)}function J(t,e){H(e,!0);let n=v(()=>e.options.node),l=v(()=>e.options.indexInParent),c=v(()=>e.options.parentBlock),i=v(()=>e.options.isInline);var m=y(),a=k(m);{var o=d=>{vt(d,{get node(){return r(n)},get indexInParent(){return r(l)},get global(){return e.global},children:(u,f)=>{var h=y(),_=k(h);z(_,17,()=>r(n).children,X,(b,P,C)=>{const I=v(()=>({node:r(P),indexInParent:C,parentBlock:void 0,isInline:void 0}));J(b,{get options(){return r(I)},get global(){return e.global}})}),g(u,h)},$$slots:{default:!0}})},s=(d,u)=>{{var f=_=>{gt(_,{get node(){return r(n)},get indexInParent(){return r(l)},get global(){return e.global},children:(b,P)=>{var C=y(),I=k(C);z(I,17,()=>he(r(n)),X,(T,B,M)=>{const O=v(()=>({parentBlock:r(n),node:r(B),isInline:!0,indexInParent:M}));J(T,{get options(){return r(O)},get global(){return e.global}})}),g(b,C)},$$slots:{default:!0}})},h=(_,b)=>{{var P=I=>{ht(I,{get node(){return r(n)},get parentBlock(){return r(c)},get global(){return e.global},children:(T,B)=>{var M=y(),O=k(M);z(O,17,()=>r(n).children,X,(S,D,j)=>{const L=v(()=>({parentBlock:r(c),node:r(D),isInline:!0,indexInParent:j}));J(S,{get options(){return r(L)},get global(){return e.global}})}),g(T,M)},$$slots:{default:!0}})},C=(I,T)=>{{var B=O=>{mt(O,{get node(){return r(n)},get indexInParent(){return r(l)},get global(){return e.global},children:(S,D)=>{var j=y(),L=k(j);z(L,17,()=>he(r(n)),X,(G,te,W)=>{const Pe=v(()=>({parentBlock:r(n),node:r(te),isInline:!0,indexInParent:W}));J(G,{get options(){return r(Pe)},get global(){return e.global}})}),g(S,j)},$$slots:{default:!0}})},M=(O,S)=>{{var D=L=>{_t(L,{get node(){return r(n)},get global(){return e.global}})},j=(L,G)=>{{var te=W=>{dt(W,{get node(){return r(n)},get parentBlock(){return r(c)},get indexInParent(){return r(l)},get isInline(){return r(i)},get global(){return e.global}})};w(L,W=>{r(n)&&W(te)},G)}};w(O,L=>{xe(r(n))?L(D):L(j,!1)},S)}};w(I,O=>{_e(r(n))?O(B):O(M,!1)},T)}};w(_,I=>{be(r(n))?I(P):I(C,!1)},b)}};w(d,_=>{ye(r(n))?_(f):_(h,!1)},u)}};w(a,d=>{ke(r(n))?d(o):d(s,!1)})}g(t,m),N()}const V=(t,e)=>`Unknown ${t}, specify a component for it in the \`components${e?".":""}${e}\` prop`,yt=(t,e)=>{switch(e){case"block":return V(`block type "${t}"`,"types");case"blockStyle":return V(`block style "${t}"`,"block");case"listItemStyle":return V(`list item style "${t}"`,"listItem");case"listStyle":return V(`list style "${t}"`,"list");case"mark":return V(`mark type "${t}"`,"marks");default:return V("type")}};function kt(t){console.warn(t)}function Ot(t,e){H(e,!0);let n=$(e,"value",19,()=>[]),l=$(e,"context",19,()=>({})),c=$(e,"onMissingComponent",3,!0),i=v(()=>ft(ut,e.components)),m=v(()=>(Array.isArray(n())?n():[n()]).map(Je)),a=v(()=>Ge(r(m),Ze)),o=v(()=>(u,f)=>{if(c()===!1)return;const h=yt(u,f);if(typeof c()=="function"){c()(h,{type:u,nodeType:f});return}kt(h)});var s=y(),d=k(s);z(d,19,()=>r(a),u=>u._key,(u,f,h)=>{const _=v(()=>({components:r(i),missingComponentHandler:r(o),context:l(),ptBlocks:r(a),ptRawValue:n()})),b=v(()=>({node:r(f),isInline:!1,indexInParent:r(h)}));J(u,{get global(){return r(_)},get options(){return r(b)}})}),g(t,s),N()}export{Ot as P,He as e};
